<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>admin.back-end documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
	   <link rel="stylesheet" href="../styles/style.css">
        <link rel="stylesheet" href="../styles/dark.css">
    </head>
    <body>

        <div class="navbar navbar-default navbar-fixed-top d-block d-sm-none">
            <a href="../" class="navbar-brand">admin.back-end documentation</a>
            <button type="button" class="btn btn-default btn-menu ion-ios-menu" id="btn-menu"></button>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
                <div id="book-search-input" role="search"><input type="text" placeholder="Type to search"></div>            <compodoc-menu></compodoc-menu>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="hidden-xs menu">
                   <compodoc-menu mode="normal"></compodoc-menu>
               </div>
               <!-- START CONTENT -->
               <div class="content injectable">
                   <div class="content-data">








<ol class="breadcrumb">
  <li class="breadcrumb-item">Injectables</li>
  <li class="breadcrumb-item" >AccessModulesService</li>
</ol>

<ul class="nav nav-tabs" role="tablist">
        <li class="nav-item">
            <a href="#info" 
                class="nav-link"
                class="nav-link active"
                role="tab" id="info-tab" data-bs-toggle="tab" data-link="info">Info</a>
        </li>
        <li class="nav-item">
            <a href="#source" 
                class="nav-link"
                
                role="tab" id="source-tab" data-bs-toggle="tab" data-link="source">Source</a>
        </li>
</ul>

<div class="tab-content">
    <div class="tab-pane fade active in" id="info">
        <p class="comment">
            <h3>File</h3>
        </p>
        <p class="comment">
            <code>src/access-modules/access-modules.service.ts</code>
        </p>





            <section data-compodoc="block-index">
    <h3 id="index">Index</h3>
    <table class="table table-sm table-bordered index-table">
        <tbody>

                <tr>
                    <td class="col-md-4">
                        <h6><b>Methods</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                <a href="#findAll" >findAll</a>
                            </li>
                            <li>
                                <a href="#findOne" >findOne</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#getModuleActionsWithRelations" >getModuleActionsWithRelations</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#getModulesStatusByRole" >getModulesStatusByRole</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#getPaywallModuleAction" >getPaywallModuleAction</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#getQueryRolModule" >getQueryRolModule</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#getQueryRolModuleAction" >getQueryRolModuleAction</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#getRolePaywallModulle" >getRolePaywallModulle</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#getUpdatePaywallModuleAction" >getUpdatePaywallModuleAction</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#setUpdateRolModuleAction" >setUpdateRolModuleAction</a>
                            </li>
                            <li>
                                <a href="#update" >update</a>
                            </li>
                        </ul>
                    </td>
                </tr>





        </tbody>
    </table>
</section>

            <section data-compodoc="block-constructor">
    <h3 id="constructor">Constructor</h3>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
<code>constructor(paywallModuleRpo: <a href="../entitys/PaywallModule.html" target="_self">Repository&lt;PaywallModule&gt;</a>, rolePaywallModuleRpo: <a href="../classes/Role.html" target="_self">Repository&lt;RolePaywallModule&gt;</a>, paywallModuleAction: Repository<PaywallModuleAction>, paywallModuleActionRelation: Repository<PaywallModuleActionRelation>, rolePaywallModuleActionRelation: <a href="../classes/Role.html" target="_self">Repository&lt;RolePaywallModuleActionRelation&gt;</a>, entityManager: EntityManager)</code>
                    </td>
                </tr>
                        <tr>
                            <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="11" class="link-to-prism">src/access-modules/access-modules.service.ts:11</a></div>
                            </td>
                        </tr>

                <tr>
                    <td class="col-md-4">
                            <div>
                                    <b>Parameters :</b>
                                    <table class="params">
                                        <thead>
                                            <tr>
                                                <td>Name</td>
                                                    <td>Type</td>
                                                <td>Optional</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                                <tr>
                                                        <td>paywallModuleRpo</td>
                                                  
                                                        <td>
                                                                        <code><a href="../entitys/PaywallModule.html" target="_self" >Repository&lt;PaywallModule&gt;</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                                <tr>
                                                        <td>rolePaywallModuleRpo</td>
                                                  
                                                        <td>
                                                                        <code><a href="../classes/Role.html" target="_self" >Repository&lt;RolePaywallModule&gt;</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                                <tr>
                                                        <td>paywallModuleAction</td>
                                                  
                                                        <td>
                                                                    <code>Repository&lt;PaywallModuleAction&gt;</code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                                <tr>
                                                        <td>paywallModuleActionRelation</td>
                                                  
                                                        <td>
                                                                    <code>Repository&lt;PaywallModuleActionRelation&gt;</code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                                <tr>
                                                        <td>rolePaywallModuleActionRelation</td>
                                                  
                                                        <td>
                                                                        <code><a href="../classes/Role.html" target="_self" >Repository&lt;RolePaywallModuleActionRelation&gt;</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                                <tr>
                                                        <td>entityManager</td>
                                                  
                                                        <td>
                                                                    <code>EntityManager</code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                        </tbody>
                                    </table>
                            </div>
                    </td>
                </tr>
            </tbody>
        </table>
</section>

            <section data-compodoc="block-methods">
    
    <h3 id="methods">
        Methods
    </h3>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="findAll"></a>
                    <span class="name">
                        <span ><b>findAll</b></span>
                        <a href="#findAll"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>findAll()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="29"
                            class="link-to-prism">src/access-modules/access-modules.service.ts:29</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="findOne"></a>
                    <span class="name">
                        <span ><b>findOne</b></span>
                        <a href="#findOne"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>findOne(id: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="33"
                            class="link-to-prism">src/access-modules/access-modules.service.ts:33</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>id</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getModuleActionsWithRelations"></a>
                    <span class="name">
                        <span class="modifier">Async</span>
                        <span ><b>getModuleActionsWithRelations</b></span>
                        <a href="#getModuleActionsWithRelations"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getModuleActionsWithRelations(moduleId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>, role: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="83"
                            class="link-to-prism">src/access-modules/access-modules.service.ts:83</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Retrieve module actions with relations for a specific module and role.</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>moduleId</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <ul>
<li>The module&#39;s ID.</li>
</ul>

                                    </td>
                                </tr>
                                <tr>
                                    <td>role</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <ul>
<li>The role.</li>
</ul>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>Promise&lt;any[]&gt;</code>

                    </div>
                    <div class="io-description">
                        <p>A promise that resolves to an array of module actions with relations.</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getModulesStatusByRole"></a>
                    <span class="name">
                        <span class="modifier">Async</span>
                        <span ><b>getModulesStatusByRole</b></span>
                        <a href="#getModulesStatusByRole"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getModulesStatusByRole(roleId: <a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank">any</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="41"
                            class="link-to-prism">src/access-modules/access-modules.service.ts:41</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>roleId</td>
                                    <td>
                                                <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>Promise&lt;any&gt;</code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getPaywallModuleAction"></a>
                    <span class="name">
                        <span class="modifier">Async</span>
                        <span ><b>getPaywallModuleAction</b></span>
                        <a href="#getPaywallModuleAction"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getPaywallModuleAction(moduleId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>, role: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="69"
                            class="link-to-prism">src/access-modules/access-modules.service.ts:69</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>moduleId</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>role</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>Promise&lt;any&gt;</code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getQueryRolModule"></a>
                    <span class="name">
                        <span class="modifier">Async</span>
                        <span ><b>getQueryRolModule</b></span>
                        <a href="#getQueryRolModule"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getQueryRolModule(moduleId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, role: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="274"
                            class="link-to-prism">src/access-modules/access-modules.service.ts:274</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Retrieve role module information for a specific module and role.</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>moduleId</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <ul>
<li>The module&#39;s ID.</li>
</ul>

                                    </td>
                                </tr>
                                <tr>
                                    <td>role</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <ul>
<li>The role.</li>
</ul>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>Promise&lt;any[]&gt;</code>

                    </div>
                    <div class="io-description">
                        <p>A promise that resolves to an array of role module information.</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getQueryRolModuleAction"></a>
                    <span class="name">
                        <span class="modifier">Async</span>
                        <span ><b>getQueryRolModuleAction</b></span>
                        <a href="#getQueryRolModuleAction"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getQueryRolModuleAction(moduleId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, ActionRelationId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, role: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="291"
                            class="link-to-prism">src/access-modules/access-modules.service.ts:291</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Retrieve role module action information for a specific module, action relation, and role.</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>moduleId</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <ul>
<li>The module&#39;s ID.</li>
</ul>

                                    </td>
                                </tr>
                                <tr>
                                    <td>ActionRelationId</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <ul>
<li>The action relation&#39;s ID.</li>
</ul>

                                    </td>
                                </tr>
                                <tr>
                                    <td>role</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <ul>
<li>The role.</li>
</ul>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>Promise&lt;any[]&gt;</code>

                    </div>
                    <div class="io-description">
                        <p>A promise that resolves to an array of role module action information.</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getRolePaywallModulle"></a>
                    <span class="name">
                        <span class="modifier">Async</span>
                        <span ><b>getRolePaywallModulle</b></span>
                        <a href="#getRolePaywallModulle"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getRolePaywallModulle(roleId: <a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank">any</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="313"
                            class="link-to-prism">src/access-modules/access-modules.service.ts:313</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Retrieve role paywall modules for a specific role.</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>roleId</td>
                                    <td>
                                                <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <ul>
<li>The role&#39;s ID.</li>
</ul>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>Promise&lt;any&gt;</code>

                    </div>
                    <div class="io-description">
                        <p>A promise that resolves to role paywall modules.</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getUpdatePaywallModuleAction"></a>
                    <span class="name">
                        <span class="modifier">Async</span>
                        <span ><b>getUpdatePaywallModuleAction</b></span>
                        <a href="#getUpdatePaywallModuleAction"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getUpdatePaywallModuleAction(moduleId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, role: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, isActiveP: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="128"
                            class="link-to-prism">src/access-modules/access-modules.service.ts:128</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Update paywall module action for a specific module, role, and isActive status.</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>moduleId</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <ul>
<li>The module&#39;s ID.</li>
</ul>

                                    </td>
                                </tr>
                                <tr>
                                    <td>role</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <ul>
<li>The role.</li>
</ul>

                                    </td>
                                </tr>
                                <tr>
                                    <td>isActiveP</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <ul>
<li>Indicates if the action is active.</li>
</ul>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>Promise&lt;any&gt;</code>

                    </div>
                    <div class="io-description">
                        <p>A promise that resolves to the updated module actions.</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="setUpdateRolModuleAction"></a>
                    <span class="name">
                        <span class="modifier">Async</span>
                        <span ><b>setUpdateRolModuleAction</b></span>
                        <a href="#setUpdateRolModuleAction"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>setUpdateRolModuleAction(moduleId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, ActionRelationId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, role: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="188"
                            class="link-to-prism">src/access-modules/access-modules.service.ts:188</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Update role module action for a specific module, action relation, and role.</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>moduleId</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <ul>
<li>The module&#39;s ID.</li>
</ul>

                                    </td>
                                </tr>
                                <tr>
                                    <td>ActionRelationId</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <ul>
<li>The action relation&#39;s ID.</li>
</ul>

                                    </td>
                                </tr>
                                <tr>
                                    <td>role</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <ul>
<li>The role.</li>
</ul>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>Promise&lt;any&gt;</code>

                    </div>
                    <div class="io-description">
                        <p>A promise that resolves to the updated role module actions.</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="update"></a>
                    <span class="name">
                        <span ><b>update</b></span>
                        <a href="#update"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>update(id: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>, updateAccessModule: <a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank">any</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="37"
                            class="link-to-prism">src/access-modules/access-modules.service.ts:37</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>id</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>updateAccessModule</td>
                                    <td>
                                                <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</section>

    </div>


    <div class="tab-pane fade  tab-source-code" id="source">
        <pre class="line-numbers compodoc-sourcecode"><code class="language-typescript">import { Injectable, NotFoundException } from &#x27;@nestjs/common&#x27;;
import { InjectRepository } from &#x27;@nestjs/typeorm&#x27;;
import { PaywallModuleAction } from &#x27;src/common/entity/paywal-module-actions.entity&#x27;;
import { PaywallModuleActionRelation } from &#x27;src/common/entity/paywall-module-actions-relations.entity&#x27;;
import { PaywallModule } from &#x27;src/common/entity/paywallModule.entity&#x27;;
import { RolePaywallModuleActionRelation } from &#x27;src/common/entity/role-paywall-module-actions.entity&#x27;;
import { RolePaywallModule } from &#x27;src/common/entity/role-paywall-module.entity&#x27;;
import { EntityManager, EntityRepository, Repository } from &#x27;typeorm&#x27;;

@Injectable()
export class AccessModulesService {
  constructor(
    @InjectRepository(PaywallModule)
    private readonly paywallModuleRpo: Repository&lt;PaywallModule&gt;,
    @InjectRepository(RolePaywallModule)
    private readonly rolePaywallModuleRpo: Repository&lt;RolePaywallModule&gt;,
    @InjectRepository(PaywallModuleAction)
    private readonly paywallModuleAction: Repository&lt;PaywallModuleAction&gt;,

    @InjectRepository(PaywallModuleActionRelation)
    private readonly paywallModuleActionRelation: Repository&lt;PaywallModuleActionRelation&gt;,

    @InjectRepository(RolePaywallModuleActionRelation)
    private readonly rolePaywallModuleActionRelation: Repository&lt;RolePaywallModuleActionRelation&gt;,

    private entityManager: EntityManager,
  ) {}

  findAll() {
    return &#x60;This action returns all accessModules&#x60;;
  }

  findOne(id: number) {
    return &#x60;This action returns a #${id} accessModule&#x60;;
  }

  update(id: number, updateAccessModule: any) {
    return &#x60;This action updates a #${id} accessModule&#x60;;
  }

  async getModulesStatusByRole(roleId: any): Promise&lt;any&gt; {
    try {
      const paywallModules &#x3D; await this.paywallModuleRpo.find();

      const paywallModulesWithStatus &#x3D; await Promise.all(
        paywallModules.map(async (module: PaywallModule) &#x3D;&gt; {
          const rolePaywallModule &#x3D; await this.rolePaywallModuleRpo.findOne({
            where: { role: roleId, paywallModule: { id: module.id } },
          });

          return {
            ...module,
            idRole: roleId,
            isActive:
              rolePaywallModule &#x3D;&#x3D; null
                ? false
                : rolePaywallModule.isActive
                ? true
                : false,
          };
        }),
      );
      return paywallModulesWithStatus;
    } catch (error) {
      throw new NotFoundException(error.message);
    }
  }

  async getPaywallModuleAction(moduleId: number, role: string): Promise&lt;any&gt; {
    try {
      return this.getModuleActionsWithRelations(moduleId, role);
    } catch (error) {
      throw new NotFoundException(error.message);
    }
  }

  /**
   * Retrieve module actions with relations for a specific module and role.
   * @param moduleId - The module&#x27;s ID.
   * @param role - The role.
   * @returns {Promise&lt;any[]&gt;} A promise that resolves to an array of module actions with relations.
   */
  async getModuleActionsWithRelations(
    moduleId: number,
    role: string,
  ): Promise&lt;any[]&gt; {
    const queryBuilder &#x3D; this.entityManager
      .createQueryBuilder()
      .select([
        &#x27;c.*&#x27;,
        &#x27;a.*&#x27;,
        &#x27;b.*&#x27;,
        &#x27;d.&quot;role&quot;&#x27;,
        &#x27;d.&quot;paywallModuleActionRelationId&quot;&#x27;,
        &#x27;d.&quot;paywallModuleId&quot;&#x27;,
      ])
      .from(PaywallModuleAction, &#x27;a&#x27;)
      .innerJoin(
        PaywallModuleActionRelation,
        &#x27;b&#x27;,
        &#x27;a.id &#x3D; b.&quot;paywallModuleActionId&quot;&#x27;,
      )
      .innerJoin(PaywallModule, &#x27;c&#x27;, &#x27;c.id &#x3D; b.&quot;paywallModuleId&quot;&#x27;)
      .leftJoinAndSelect(
        (subQuery) &#x3D;&gt;
          subQuery
            .from(RolePaywallModuleActionRelation, &#x27;d&#x27;)
            .select([
              &#x27;d.&quot;role&quot;&#x27;,
              &#x27;d.&quot;paywallModuleId&quot;&#x27;,
              &#x27;d.&quot;paywallModuleActionRelationId&quot;&#x27;,
            ]),
        &#x27;d&#x27;,
        &#x27;d.&quot;paywallModuleId&quot; &#x3D; c.id AND d.&quot;paywallModuleActionRelationId&quot; &#x3D; b.&quot;paywallModuleActionId&quot; AND d.&quot;role&quot; &#x3D; :role&#x27;,
        { role: role },
      )
      .where(&#x27;c.id &#x3D; :moduleId&#x27;, { moduleId: moduleId });
    return queryBuilder.getRawMany();
  }

  /**
   * Update paywall module action for a specific module, role, and isActive status.
   * @param moduleId - The module&#x27;s ID.
   * @param role - The role.
   * @param isActiveP - Indicates if the action is active.
   * @returns {Promise&lt;any&gt;} A promise that resolves to the updated module actions.
   */
  async getUpdatePaywallModuleAction(
    moduleId: string,
    role: string,
    isActiveP: string,
  ): Promise&lt;any&gt; {
    const moduleIdAsNumber &#x3D; parseInt(moduleId, 10);

    try {
      var resultModule &#x3D; this.getQueryRolModule(moduleId, role);

      if ((await resultModule).length &gt; 0) {
        var params &#x3D; { isActive: isActiveP &#x3D;&#x3D; &#x27;true&#x27; ? true : false };
        var updateModule &#x3D; this.entityManager
          .createQueryBuilder()
          .update(RolePaywallModule)
          .set(params)
          .where(&#x27;role &#x3D; :role&#x27;, { role: role })
          .andWhere(&#x27;paywallModuleId &#x3D; :moduleId&#x27;, { moduleId: moduleId });

        const updateResult &#x3D; await updateModule.execute();

        if (updateResult.affected &gt; 0) {
          return this.getQueryRolModule(moduleId, role);
        } else {
          return [];
        }
      } else {
        const moduleIdAsNumber &#x3D; parseInt(moduleId, 10);

        const paywallModule &#x3D; await this.paywallModuleRpo.findOne({
          where: { id: moduleIdAsNumber },
        });

        if (!paywallModule) {
          console.log(&#x27;No se encontró el módulo con el ID proporcionado.&#x27;);
          return;
        }
        var paramsInsert &#x3D; {
          isActive: isActiveP &#x3D;&#x3D; &#x27;true&#x27; ? true : false,
          role: role,
          paywallModule: paywallModule,
        };
        if ((await this.rolePaywallModuleRpo.insert(paramsInsert)).raw &gt; 0) {
          return this.getQueryRolModule(moduleId, role);
        } else {
          return [];
        }
      }
    } catch (error) {
      throw new NotFoundException(error.message);
    }
  }

  /**
   * Update role module action for a specific module, action relation, and role.
   * @param moduleId - The module&#x27;s ID.
   * @param ActionRelationId - The action relation&#x27;s ID.
   * @param role - The role.
   * @returns {Promise&lt;any&gt;} A promise that resolves to the updated role module actions.
   */
  async setUpdateRolModuleAction(
    moduleId: string,
    ActionRelationId: string,
    role: string,
  ): Promise&lt;any&gt; {
    const moduleIdAsNumber &#x3D; parseInt(moduleId, 10);

    try {
      var resultModule &#x3D; this.getQueryRolModuleAction(
        moduleId,
        ActionRelationId,
        role,
      );

      if ((await resultModule).length &gt; 0) {
        // var params &#x3D; { &quot;isActive&quot;: (isActiveP &#x3D;&#x3D; &quot;true&quot; ? true : false) }
        var updateModule &#x3D; this.entityManager
          .createQueryBuilder()
          .delete()
          .from(RolePaywallModuleActionRelation)
          .where(&#x27;role &#x3D; :role&#x27;, { role: role })
          .andWhere(&#x27;paywallModuleId &#x3D; :moduleId&#x27;, { moduleId: moduleId })
          .andWhere(&#x27;paywallModuleActionRelationId &#x3D; :ActionRelationId&#x27;, {
            ActionRelationId: ActionRelationId,
          });

        // console.log(&quot; updateModule &quot;, updateModule.getQuery())
        // console.log(&quot; updateModule &quot;, updateModule.getSql())
        // console.log(&quot; updateModule &quot;, updateModule.getParameters())

        const updateResult &#x3D; await updateModule.execute();
        if (updateResult.affected &gt; 0) {
          return this.getQueryRolModuleAction(moduleId, ActionRelationId, role);
        } else {
          return [];
        }
      } else {
        console.log(&#x27; REGISTRANDO AQUI ... &#x27;);
        const moduleIdAsNumber &#x3D; parseInt(moduleId, 10);

        const paywallModule &#x3D; await this.paywallModuleRpo.findOne({
          where: { id: moduleIdAsNumber },
        });

        if (!paywallModule) {
          console.log(&#x27;No se encontró el módulo con el ID proporcionado.&#x27;);
          return;
        }

        const ActionRelationIdAsNumber &#x3D; parseInt(ActionRelationId, 10);

        const paywallModuleActionRelation &#x3D;
          await this.paywallModuleActionRelation.findOne({
            where: { id: ActionRelationIdAsNumber },
          });

        if (!paywallModuleActionRelation) {
          console.log(&#x27;No se encontró el módulo con el ID proporcionado.&#x27;);
          return;
        }

        var paramsInsert &#x3D; {
          paywallModuleActionRelation: paywallModuleActionRelation,
          role: role,
          paywallModule: paywallModule,
        };
        if (
          (await this.rolePaywallModuleActionRelation.insert(paramsInsert))
            .raw &gt; 0
        ) {
          return this.getQueryRolModuleAction(moduleId, ActionRelationId, role);
        } else {
          return [];
        }
      }
    } catch (error) {
      throw new NotFoundException(error.message);
    }
  }

  /**
   * Retrieve role module information for a specific module and role.
   * @param moduleId - The module&#x27;s ID.
   * @param role - The role.
   * @returns {Promise&lt;any[]&gt;} A promise that resolves to an array of role module information.
   */
  async getQueryRolModule(moduleId: string, role: string): Promise&lt;any[]&gt; {
    const queryBuilder &#x3D; this.entityManager
      .createQueryBuilder()
      .select([&#x27;a.*&#x27;])
      .from(RolePaywallModule, &#x27;a&#x27;)
      .where(&#x27;a.role &#x3D; :role&#x27;, { role: role })
      .andWhere(&#x27;a.paywallModuleId &#x3D; :moduleId&#x27;, { moduleId: moduleId });
    return queryBuilder.getRawMany();
  }

  /**
   * Retrieve role module action information for a specific module, action relation, and role.
   * @param moduleId - The module&#x27;s ID.
   * @param ActionRelationId - The action relation&#x27;s ID.
   * @param role - The role.
   * @returns {Promise&lt;any[]&gt;} A promise that resolves to an array of role module action information.
   */
  async getQueryRolModuleAction(
    moduleId: string,
    ActionRelationId: string,
    role: string,
  ): Promise&lt;any[]&gt; {
    const queryBuilder &#x3D; this.entityManager
      .createQueryBuilder()
      .select([&#x27;a.*&#x27;])
      .from(RolePaywallModuleActionRelation, &#x27;a&#x27;)
      .where(&#x27;a.role &#x3D; :role&#x27;, { role: role })
      .andWhere(&#x27;a.paywallModuleId &#x3D; :moduleId&#x27;, { moduleId: moduleId })
      .andWhere(&#x27;a.paywallModuleActionRelationId &#x3D; :ActionRelationId&#x27;, {
        ActionRelationId: ActionRelationId,
      });
    return queryBuilder.getRawMany();
  }

  /**
   * Retrieve role paywall modules for a specific role.
   * @param roleId - The role&#x27;s ID.
   * @returns {Promise&lt;any&gt;} A promise that resolves to role paywall modules.
   */
  async getRolePaywallModulle(roleId: any): Promise&lt;any&gt; {
    console.log(&#x27;ingresó al servicio&#x27;);
    try {
      const rolePaywallModule &#x3D; await this.rolePaywallModuleRpo.find();
    } catch (error) {
      throw new NotFoundException(error.message);
    }
  }
}
</code></pre>
    </div>

</div>













                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
               <!-- END CONTENT -->
           </div>
       </div>

          <label class="dark-mode-switch">
               <input type="checkbox">
               <span class="slider">
                    <svg class="slider-icon" viewBox="0 0 24 24" fill="none" height="20" stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" width="20" xmlns="http://www.w3.org/2000/svg">
                    <path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"></path>
                    </svg>
               </span>
          </label>

       <script>
            var COMPODOC_CURRENT_PAGE_DEPTH = 1;
            var COMPODOC_CURRENT_PAGE_CONTEXT = 'injectable';
            var COMPODOC_CURRENT_PAGE_URL = 'AccessModulesService.html';
            var MAX_SEARCH_RESULTS = 15;
       </script>

       <script src="../js/libs/custom-elements.min.js"></script>
       <script src="../js/libs/lit-html.js"></script>

       <script src="../js/menu-wc.js" defer></script>
       <script nomodule src="../js/menu-wc_es5.js" defer></script>

       <script src="../js/libs/bootstrap-native.js"></script>

       <script src="../js/libs/es6-shim.min.js"></script>
       <script src="../js/libs/EventDispatcher.js"></script>
       <script src="../js/libs/promise.min.js"></script>
       <script src="../js/libs/zepto.min.js"></script>

       <script src="../js/compodoc.js"></script>

       <script src="../js/tabs.js"></script>
       <script src="../js/menu.js"></script>
       <script src="../js/libs/clipboard.min.js"></script>
       <script src="../js/libs/prism.js"></script>
       <script src="../js/sourceCode.js"></script>
          <script src="../js/search/search.js"></script>
          <script src="../js/search/lunr.min.js"></script>
          <script src="../js/search/search-lunr.js"></script>
          <script src="../js/search/search_index.js"></script>
       <script src="../js/lazy-load-graphs.js"></script>


    </body>
</html>
